from aiogram import types
from aiogram.dispatcher import FSMContext
from bot.bin.compatibility_db import compatibility_caption
from bot.filters import IsNotAdminUser
from bot.handlers.channels_op import check_subscribe_channels
from aiogram.dispatcher.filters.builtin import Text
from bot.keyboards import inline as ikb
from bot.keyboards import default as kb
from bot.loader import bot, dp
from bot.utils.mysql import db
from bot.utils.states.code_love import CodeLove
from bot.utils.states.personal_cons import PersonalCons


@dp.message_handler(IsNotAdminUser(), Text('üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é'), state=['*'])
async def goto_main_menu_handler(message: types.Message, state: FSMContext):
    await state.finish()
    if not await check_subscribe_channels(message.from_user.id):
        await message.answer('üèö –í—ã –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é', reply_markup=kb.main_menu_keyboard)



@dp.message_handler(IsNotAdminUser(), Text('ü™¨ –õ–∏—á–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏'))
async def consultations_handler(message: types.Message):
    if not await check_subscribe_channels(message.from_user.id):
        with open('bot/images/cons.jpg', 'rb') as cons:
            await bot.send_photo(message.chat.id, cons, '‚ùî–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –í–∞—Å –ª–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã!',
                                 reply_markup=kb.cons_kb)


@dp.message_handler(IsNotAdminUser(), Text('üîÆ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ 2023 –≥–æ–¥'))
async def personal_horo_handler(message: types.Message, state: FSMContext):
    await state.set_state(PersonalCons.get_text)
    await message.answer('<b>üîÆ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ 2023 –≥–æ–¥</b>\n\n'
                         '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –≥–æ–¥, —Å —É—á–µ—Ç–æ–º –í–∞—à–µ–π —Ç–æ—á–Ω–æ–π –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –º–µ—Å—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è.\n'
                         '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏:\n'
                         '1. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –≤–∞—à–µ–≥–æ —Ä–æ–∂–¥–µ–Ω–∏—è: –¥–µ–Ω—å, –º–µ—Å—è—Ü, –≥–æ–¥, —á–∞—Å, –º–∏–Ω—É—Ç–∞. (–ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è, —É–∫–∞–∂–∏—Ç–µ —Ö–æ—Ç—è –±—ã –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)\n'
                         '2. –ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è: –°—Ç—Ä–∞–Ω–∞, –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç (–±–ª–∏–∂–∞–π—à–∏–π –≥–æ—Ä–æ–¥ –æ—Ç –º–µ—Å—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è)\n'
                         '3. –í–∞—à –ü–æ–ª\n\n'
                         '–ü—Ä–∏–º–µ—Ä:\n'
                         '19.11.1998 17:05\n'
                         '–†–æ—Å—Å–∏—è, –≥. –¢–æ–º—Å–∫\n'
                         '–ñ–µ–Ω.', reply_markup=kb.goto_menu_kb)


@dp.message_handler(IsNotAdminUser(), Text('‚ù§Ô∏è‚Äçüî• –õ–∏—á–Ω—ã–π –∫–æ–¥ –ª—é–±–≤–∏ –∏ –∏–∑–æ–±–∏–ª–∏—è'))
async def code_love_cons_handler(message: types.Message, state: FSMContext):
    await state.set_state(PersonalCons.get_text)
    await message.answer('<b>‚ù§Ô∏è‚Äçüî• –õ–∏—á–Ω—ã–π –∫–æ–¥ –ª—é–±–≤–∏ –∏ –∏–∑–æ–±–∏–ª–∏—è</b>\n\n'
                         '¬´–ö–æ–¥ –ª—é–±–≤–∏ –∏ –∏–∑–æ–±–∏–ª–∏—è¬ª –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –æ–±—Ä—è–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –í–∞–º –Ω–∞–π—Ç–∏ –ª—é–±–æ–≤—å –∏–ª–∏ —É–ª—É—á—à–∏—Ç—å –í–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –≤ –ø–∞—Ä–µ.\n\n'
                         '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏:\n'
                         '–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ, –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: –¥–µ–Ω—å, –º–µ—Å—è—Ü, –≥–æ–¥\n\n'
                         '–ü—Ä–∏–º–µ—Ä:\n'
                         '–ì–∞–≤—Ä–∏–∫–æ–≤–∞ –Æ–ª–∏—è –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞  19.11.1998', reply_markup=kb.goto_menu_kb)


@dp.message_handler(IsNotAdminUser(), Text('üë©‚Äç‚ù§Ô∏è‚Äçüë® –õ–∏—á–Ω—ã–π –∫–æ–¥ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤'))
async def sovmest_cons_handler(message: types.Message, state: FSMContext):
    await state.set_state(PersonalCons.get_text)
    await message.answer('<b>üë©‚Äç‚ù§Ô∏è‚Äçüë® –õ–∏—á–Ω—ã–π –∫–æ–¥ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤</b>\n\n'
                         '–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –æ –í–∞—à–µ–º —Å–æ—é–∑–µ –Ω—É–∂–Ω—ã –¥–≤–µ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è: –í–∞—à–∞ –∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞.\n'
                         '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏:\n'
                         '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –ú—É–∂—á–∏–Ω—ã ‚Äì –¥–µ–Ω—å, –º–µ—Å—è—Ü, –≥–æ–¥.\n'
                         '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –ñ–µ–Ω—â–∏–Ω—ã ‚Äì –¥–µ–Ω—å, –º–µ—Å—è—Ü, –≥–æ–¥.\n\n'
                         '–ü—Ä–∏–º–µ—Ä:\n'
                         '11.06.1996\n'
                         '19.11.1998', reply_markup=kb.goto_menu_kb)



@dp.message_handler(IsNotAdminUser(), Text('üèÜ –ß–∏—Å–ª–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏'))
async def number_life_cons_handler(message: types.Message, state: FSMContext):
    await state.set_state(PersonalCons.get_text)
    await message.answer('<b>üèÜ –ß–∏—Å–ª–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏</b>\n\n'
                         '–í–∞—à–µ –ß–∏—Å–ª–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –¥–ª—è —á–µ–≥–æ –≤—ã —Ä–æ–∂–¥–µ–Ω—ã –Ω–∞ —Å–≤–µ—Ç!'
                         '–≠—Ç–æ –≤–∞—à —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∂–∏–∑–Ω–∏. –û–Ω–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ —Å—Ñ–µ—Ä–∞—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ—É—Å–ø–µ—Ç—å, –∫–∞–∫–∏–º–∏ —Ç–∞–ª–∞–Ω—Ç–∞–º–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –≤—ã –æ–±–ª–∞–¥–∞–µ—Ç–µ.\n\n'
                         '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏:\n'
                         '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: —á–∏—Å–ª–æ, –º–µ—Å—è—Ü, –≥–æ–¥.\n\n'
                         '–ü—Ä–∏–º–µ—Ä:\n'
                         '19.11.1998', reply_markup=kb.goto_menu_kb)



@dp.message_handler(IsNotAdminUser(), Text('üí´ –ß–∏—Å–ª–æ –°—É–¥—å–±—ã (–ò–º–µ–Ω–∏)'))
async def number_name_cons_handler(message: types.Message, state: FSMContext):
    await state.set_state(PersonalCons.get_text)
    await message.answer('<b>üí´ –ß–∏—Å–ª–æ –°—É–¥—å–±—ã (–ò–º–µ–Ω–∏)</b>\n\n'
                         '–ß–∏—Å–ª–æ —Å—É–¥—å–±—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ü–µ–ª—å –≤–∞—à–µ–π –∂–∏–∑–Ω–∏. –í–∞—à–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—Å–ø–µ—Ö–∞.'
                         '–í–∞—à–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ. –¶–µ–ª—å, –∫ –∫–æ—Ç–æ—Ä–æ–π –≤—ã –¥–æ–ª–∂–Ω—ã —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è –≤ –∂–∏–∑–Ω–∏.\n'
                         '–ß–∏—Å–ª–æ –°—É–¥—å–±—ã –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ –≤ –≤–∞—à–µ–º –ø–æ–ª–Ω–æ–º –∏–º–µ–Ω–∏. –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –º–µ–Ω—è–µ—Ç —Ñ–∞–º–∏–ª–∏—é, –º–µ–Ω—è–µ—Ç—Å—è –µ–≥–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ.\n\n'
                         '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏:\n'
                         '–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ\n\n'
                         '–ü—Ä–∏–º–µ—Ä:\n'
                         '–ì–∞–≤—Ä–∏–∫–æ–≤–∞ –Æ–ª–∏—è –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞', reply_markup=kb.goto_menu_kb)


@dp.message_handler(IsNotAdminUser(), Text('üÄÑÔ∏è –†–∞—Å–∫–ª–∞–¥ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã'))
async def natalnaya_cons_handler(message: types.Message, state: FSMContext):
    await state.set_state(PersonalCons.get_text)
    await message.answer('<b>üÄÑÔ∏è –†–∞—Å–∫–ª–∞–¥ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã</b>\n\n'
                         '<b>–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞</b> –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å—Ö–µ–º—É –∑–≤–µ–∑–¥–Ω–æ–≥–æ –Ω–µ–±–∞ –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –≤—ã —Ä–æ–¥–∏–ª–∏—Å—å\n'
                         '–û–Ω–∞ —Å—Ç—Ä–æ–∏—Ç—Å—è –∏–∑ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–ª–∞–Ω–µ—Ç,–∫–æ—Ç–æ—Ä–æ–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—É–¥—å–±—É,–Ω–∞—Å—Ç–æ—è—â–µ–µ –∏ –±—É–¥—É—â–µ–µ\n\n'
                         '<b>–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞</b> –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø–∏—Å–∞—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–Ω—è—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä —á–µ–ª–æ–≤–µ–∫–∞. '
                         '–ê –µ—Å–ª–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞—Ä—Ç—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–≥–Ω–æ–∑–∞, —Ç–æ –∏ —Ä–∞—Å–∫–ª–∞–¥–∫—É –Ω–∞ –±—É–¥—É—â–µ–µ. '
                         '–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –º–æ–∂–µ—Ç –¥–∞—Ç—å —á–µ–ª–æ–≤–µ–∫—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏. '
                         '–ù–∞–ø—Ä–∏–º–µ—Ä: —Ä–∞–±–æ—Ç–µ,–∫–∞—Ä—å–µ—Ä–µ, –¥–µ–Ω–µ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö, –∑–¥–æ—Ä–æ–≤—å–µ, –∞ —Ç–∞–∫ –∂–µ –ª—é–±–≤–∏ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.', reply_markup=kb.goto_menu_kb)

